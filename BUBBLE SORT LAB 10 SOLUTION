#include <iostream>
#include <fstream>
#include <chrono>
using namespace std;
using namespace chrono;

int main() {
    ifstream file("numbers.txt");

    if (!file) {
        cout << "Error opening file!" << endl;
        return 1;
    }

    int size = 0, value;

    // Count numbers
    while (file >> value) {
        size++;
        if (file.peek() == ',')
            file.ignore();
    }

    file.clear();
    file.seekg(0);

    // Dynamic array
    int* arr = new int[size];

    // Read numbers
    for (int i = 0; i < size; i++) {
        file >> arr[i];
        if (file.peek() == ',')
            file.ignore();
    }

    file.close();

    // Start timing
    auto start = high_resolution_clock::now();

    // Bubble Sort
    for (int i = 0; i < size - 1; i++) {
        for (int j = 0; j < size - i - 1; j++) {
            if (arr[j] > arr[j + 1]) {
                int temp = arr[j];
                arr[j] = arr[j + 1];
                arr[j + 1] = temp;
            }
        }
    }

    // End timing
    auto stop = high_resolution_clock::now();
    auto duration = duration_cast<milliseconds>(stop - start);

    cout << "Sorting completed.\n";
    cout << "Time taken: " << duration.count() << " Milliseconds\n";

    delete[] arr;
    return 0;
}
